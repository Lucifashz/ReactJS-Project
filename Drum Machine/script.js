const audioListOne = [
  {
    keyCode: 81,
    name: 'Heater 1',
    key: 'Q',
    id: 'Heater-1',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-1.mp3'
  },
  {
    keyCode: 87,
    name: 'Heater 2',
    key: 'W',
    id: 'Heater-2',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-2.mp3'
  },
  {
    keyCode: 69,
    name: 'Heater 3',
    key: 'E',
    id: 'Heater-3',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-3.mp3'
  },
  {
    keyCode: 65,
    name: 'Heater 4',
    key: 'A',
    id: 'Heater-4',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-4_1.mp3'
  },
  {
    keyCode: 83,
    name: 'Clap',
    key: 'S',
    id: 'Clap',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-6.mp3'
  },
  {
    keyCode: 68,
    name: 'Open HH',
    key: 'D',
    id: 'Open-HH',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Dsc_Oh.mp3'
  },
  {
    keyCode: 90,
    name: "Kick n' Hat",
    key: 'Z',
    id: "Kick-n'-Hat",
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Kick_n_Hat.mp3'
  },
  {
    keyCode: 88,
    name: 'Kick',
    key: 'X',
    id: 'Kick',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/RP4_KICK_1.mp3'
  },
  {
    keyCode: 67,
    name: 'Closed HH',
    key: 'C',
    id: 'Closed-HH',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Cev_H2.mp3'
  }
]

const audioListTwo = [
  {
    keyCode: 81,
    name: 'Chord 1',
    key: 'Q',
    id: 'Chord-1',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Chord_1.mp3'
  },
  {
    keyCode: 87,
    name: 'Chord 2',
    key: 'W',
    id: 'Chord-2',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Chord_2.mp3'
  },
  {
    keyCode: 69,
    name: 'Chord 3',
    key: 'E',
    id: 'Chord-3',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Chord_3.mp3'
  },
  {
    keyCode: 65,
    name: 'Shaker',
    key: 'A',
    id: 'Shaker',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Give_us_a_light.mp3'
  },
  {
    keyCode: 83,
    name: 'Open HH',
    key: 'S',
    id: 'Open-HH',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Dry_Ohh.mp3'
  },
  {
    keyCode: 68,
    name: 'Closed HH',
    key: 'D',
    id: 'Closed-HH',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Bld_H1.mp3'
  },
  {
    keyCode: 90,
    name: 'Punchy Kick',
    key: 'Z',
    id: 'Punchy-Kick',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/punchy_kick_1.mp3'
  },
  {
    keyCode: 88,
    name: 'Side Stick',
    key: 'X',
    id: 'Side-Stick',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/side_stick_1.mp3'
  },
  {
    keyCode: 67,
    name: 'Snare',
    key: 'C',
    id: 'Snare',
    url: 'https://s3.amazonaws.com/freecodecamp/drums/Brk_Snr.mp3'
  }
]

const audioListThree = [
  {
    keyCode: 81,
    name: 'Bass 1',
    key: 'Q',
    id: 'Bass-1',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bass%20(1).wav'
  },
  {
    keyCode: 87,
    name: 'Bass 2',
    key: 'W',
    id: 'Bass-2',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bass%20(2).wav'
  },
  {
    keyCode: 69,
    name: 'Bass 3',
    key: 'E',
    id: 'Bass-3',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bass%20(3).wav'
  },
  {
    keyCode: 65,
    name: 'Bassdrum 1',
    key: 'A',
    id: 'Bassdrum-1',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bassdrum%20(11).wav'
  },
  {
    keyCode: 83,
    name: 'Bassdrum 2',
    key: 'S',
    id: 'Bassdrum-2',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bassdrum%20(12).wav'
  },
  {
    keyCode: 68,
    name: 'Bassdrum 3',
    key: 'D',
    id: 'Bassdrum-3',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bassdrum%20(13).wav'
  },
  {
    keyCode: 90,
    name: 'Synth 1',
    key: 'Z',
    id: 'Synth-1',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Synth%20(13).wav'
  },
  {
    keyCode: 88,
    name: 'Synth 2',
    key: 'X',
    id: 'Synth-2',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Synth%20(14).wav'
  },
  {
    keyCode: 67,
    name: 'Synth 3',
    key: 'C',
    id: 'Synth-3',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Synth%20(15).wav'
    }
]

const audioListFour = [
  {
    keyCode: 81,
    name: 'Bass 1',
    key: 'Q',
    id: 'Bass-1',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bass%20(4).wav'
  },
  {
    keyCode: 87,
    name: 'Bass 2',
    key: 'W',
    id: 'Bass-2',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bass%20(5).wav'
  },
  {
    keyCode: 69,
    name: 'Bass 3',
    key: 'E',
    id: 'Bass-3',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bass%20(6).wav'
  },
  {
    keyCode: 65,
    name: 'Bassdrum 1',
    key: 'A',
    id: 'Bassdrum-1',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bassdrum%20(14).wav'
  },
  {
    keyCode: 83,
    name: 'Bassdrum 2',
    key: 'S',
    id: 'Bassdrum-2',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bassdrum%20(15).wav'
  },
  {
    keyCode: 68,
    name: 'Bassdrum 3',
    key: 'D',
    id: 'Bassdrum-3',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bassdrum%20(16).wav'
  },
  {
    keyCode: 90,
    name: 'Synth 1',
    key: 'Z',
    id: 'Synth-1',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Synth%20(16).wav'
  },
  {
    keyCode: 88,
    name: 'Synth 2',
    key: 'X',
    id: 'Synth-2',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Synth%20(17).wav'
  },
  {
    keyCode: 67,
    name: 'Synth 3',
    key: 'C',
    id: 'Synth-3',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Synth%20(18).wav'
    }
]

const audioListFive = [
  {
    keyCode: 81,
    name: 'Bass 1',
    key: 'Q',
    id: 'Bass-1',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bass%20(7).wav'
  },
  {
    keyCode: 87,
    name: 'Bass 2',
    key: 'W',
    id: 'Bass-2',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bass%20(9).wav'
  },
  {
    keyCode: 69,
    name: 'Bass 3',
    key: 'E',
    id: 'Bass-3',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bass%20(13).wav'
  },
  {
    keyCode: 65,
    name: 'Bassdrum 1',
    key: 'A',
    id: 'Bassdrum-1',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bassdrum%20(17).wav'
  },
  {
    keyCode: 83,
    name: 'Bassdrum 2',
    key: 'S',
    id: 'Bassdrum-2',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bassdrum%20(18).wav'
  },
  {
    keyCode: 68,
    name: 'Bassdrum 3',
    key: 'D',
    id: 'Bassdrum-3',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bassdrum%20(43).wav'
  },
  {
    keyCode: 90,
    name: 'Synth 1',
    key: 'Z',
    id: 'Synth-1',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Synth%20(19).wav'
  },
  {
    keyCode: 88,
    name: 'Synth 2',
    key: 'X',
    id: 'Synth-2',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Synth%20(20).wav'
  },
  {
    keyCode: 67,
    name: 'Synth 3',
    key: 'C',
    id: 'Synth-3',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Synth%20(21).wav'
    }
]

const audioListSix = [
  {
    keyCode: 81,
    name: 'Bass 1',
    key: 'Q',
    id: 'Bass-1',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bass%20(23).wav'
  },
  {
    keyCode: 87,
    name: 'Bass 2',
    key: 'W',
    id: 'Bass-2',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bass%20(24).wav'
  },
  {
    keyCode: 69,
    name: 'Bass 3',
    key: 'E',
    id: 'Bass-3',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bass%20(35).wav'
  },
  {
    keyCode: 65,
    name: 'Bassdrum 1',
    key: 'A',
    id: 'Bassdrum-1',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bassdrum%20(44).wav'
  },
  {
    keyCode: 83,
    name: 'Bassdrum 2',
    key: 'S',
    id: 'Bassdrum-2',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bassdrum%20(45).wav'
  },
  {
    keyCode: 68,
    name: 'Bassdrum 3',
    key: 'D',
    id: 'Bassdrum-3',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Bassdrum%20(46).wav'
  },
  {
    keyCode: 90,
    name: 'Synth 1',
    key: 'Z',
    id: 'Synth-1',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Synth%20(33).wav'
  },
  {
    keyCode: 88,
    name: 'Synth 2',
    key: 'X',
    id: 'Synth-2',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Synth%20(34).wav'
  },
  {
    keyCode: 67,
    name: 'Synth 3',
    key: 'C',
    id: 'Synth-3',
    url: 'https://amazing-gaufre-23d83c.netlify.app/Synth%20(36).wav'
    }
]

const soundsName = {
  heaterKit: "Heater Kit",
  smoothPianoKit: "Smooth Piano Kit",
  presetOne: "Preset 1",
  presetTwo: "Preset 2",
  presetThree: "Preset 3",
  presetFour: "Preset 4"
}

const soundsGroup = {
  heaterKit: audioListOne,
  smoothPianoKit: audioListTwo,
  presetOne: audioListThree,
  presetTwo: audioListFour,
  presetThree: audioListFive,
  presetFour: audioListSix
}

const KeyboardKey = ({sound: {key, url, id, keyCode, name}}) => {

  React.useEffect(() => {
    document.addEventListener("keydown", handleKeydown);
    return () => {
      document.removeEventListener("keydown", handleKeydown);
    };
  });

  const handleKeydown = (e) => {
    if (e.keyCode === keyCode) {
      playAudio()
    }
  }

  const styleActive = (audio) => {
    audio.parentElement.style.backgroundColor = "#fff"
    audio.parentElement.style.color = "#000"
  }

  const deactivateAudio = (active) => {
    setTimeout(() => {
      active.parentElement.style.backgroundColor = "#7868FF"
      active.parentElement.style.color = "#fff"
    }, 300)
  }

  const playAudio = () => {
    const audioTag = document.getElementById(key);
    const displaySound = document.querySelector('#display');
    styleActive(audioTag);
    audioTag.currentTime = 0;
    audioTag.play()
    deactivateAudio(audioTag);
    const displayName = name;
    displaySound.innerText = displayName;
    displaySound.style.display = 'none';
    setTimeout(function() {
      displaySound.style.display = 'block';
    });
  }

  return (
    <button onClick={playAudio} id={id} className="drum-pad">
      <audio className="clip" id={key} src={url} />
      {key}
    </button>
  )
}

const Keyboard = ({sounds, power}) => {
  return (
    <div className="pad-bank">
      {!power ? 
      sounds.map(sound => <KeyboardKey key={sound.keyCode} sound={sound}/>)
      : sounds.map(sound => <KeyboardKey key={sound.keyCode} sound={{...sound, url : "#" }}/>)
      }
    </div>
  );
}

const DrumControle = ({heaterKit, smoothPianoKit, presetOne, presetTwo,
                    presetThree, presetFour, handleVolume, volume, power,
                    stop}) => {
  return (  
  <div className="controls">
    <div className="power-audio">
      <div className="power">
        <h3>Power {power ? "OFF" : "ON"}</h3>
        <label className="switch">
          <input onClick={stop} type="checkbox" id="togBtn" />
          <div className="slider round"></div>
        </label>
      </div>
      <div className="audio">
        <h3>Volume: {Math.round(volume * 100)}</h3>
        <div className="input-volume">
          <input className="slider-volume" type="range" min="0" max="1" step="0.01" value={volume} onChange={handleVolume}/>
          <div className="slider-text">{Math.round(volume * 100)}</div>
        </div>
      </div>
    </div>
    <div className="mode">
      <div className="text-mode">
        <h3 id="display-controle" className="animation">{power ? null : soundsName.heaterKit }</h3>
      </div>
      <div className="drum-controle">
        <button className="button-1" onClick={heaterKit}>Heater Kit</button>
        <button className="button-2" onClick={smoothPianoKit}>Smooth Piano Kit</button>
        <button className="button-3" onClick={presetOne}>Preset 1</button>
        <button className="button-4" onClick={presetTwo}>Preset 2</button>
        <button className="button-5" onClick={presetThree}>Preset 3</button>
        <button className="button-6" onClick={presetFour}>Preset 4</button>
      </div>
    </div>
  </div>
  )
}

const App = () => {
  const [power, setPower] = React.useState(true)
  const [soundsType, setSoundsType] = React.useState("heaterKit")
  const [sounds, setSounds] = React.useState(soundsGroup[soundsType]);
  const [volume, setVolume] = React.useState(1);

  const stop = () => {
  setPower(!power)
  const x = document.querySelector("#display");
  const z = document.querySelector("#display-controle");
  x.style.display = 'none';
  z.style.display = 'none';
  setTimeout(function() {
  x.style.display = 'block';
  z.style.display = 'block';
  });
  if (!power) {
    x.innerHTML = "";
  } else {
    x.innerHTML = "Welcome Back :)";
    setSounds(soundsGroup.heaterKit);
  }
};

  const handleVolume = (e) => {
    setVolume(e.target.value)
  }

  const heaterKit = () => {
    const animation = document.querySelector(".animation");
    const displayBtn = document.querySelector("#display-controle");
    setSounds(soundsGroup.heaterKit);
    animation.style.display = 'none';
    displayBtn.innerText = soundsName.heaterKit;
    setTimeout(function() {
      animation.style.display = 'block';
    });
  }

  const smoothPianoKit = () => {
    const animation = document.querySelector(".animation");
    const displayBtn = document.querySelector("#display-controle");
    setSounds(soundsGroup.smoothPianoKit);
    animation.style.display = 'none';
    displayBtn.innerText = soundsName.smoothPianoKit;
    setTimeout(function() {
      animation.style.display = 'block';
    });
  }

  const presetOne = () => {
    const animation = document.querySelector(".animation");
    const displayBtn = document.querySelector("#display-controle");
    setSounds(soundsGroup.presetOne);
    animation.style.display = 'none';
    displayBtn.innerText = soundsName.presetOne;
    setTimeout(function() {
      animation.style.display = 'block';
    });
  }

  const presetTwo = () => {
    const animation = document.querySelector(".animation");
    const displayBtn = document.querySelector("#display-controle");
    setSounds(soundsGroup.presetTwo);
    animation.style.display = 'none';
    displayBtn.innerText = soundsName.presetTwo;
    setTimeout(function() {
      animation.style.display = 'block';
    });
  }

  const presetThree = () => {
    const animation = document.querySelector(".animation");
    const displayBtn = document.querySelector("#display-controle");
    setSounds(soundsGroup.presetThree);
    animation.style.display = 'none';
    displayBtn.innerText = soundsName.presetThree;
    setTimeout(function() {
      animation.style.display = 'block';
    });
  }

  const presetFour = () => {
    const animation = document.querySelector(".animation");
    const displayBtn = document.querySelector("#display-controle");
    setSounds(soundsGroup.presetFour);
    animation.style.display = 'none';
    displayBtn.innerText = soundsName.presetFour;
    setTimeout(function() {
      animation.style.display = 'block';
    });
  }

  const setKeyVolume = () => {
    const audios = sounds.map(sound => document.getElementById(sound.key));
    audios.forEach(audio => {
      if (audio) {
        audio.volume = volume
      }
    })
  }

  
  return (
  <div id="drum-machine">
    {setKeyVolume()}
    <div className="display-sound">
      <div className="text">
        <h1 id="display"></h1>
      </div>
    </div>
    <div className="wrapper">
      <Keyboard power={power} sounds={sounds}/>
      <DrumControle 
      stop={stop}
      power={power}
      volume={volume}
      handleVolume={handleVolume}
      heaterKit={heaterKit}
      smoothPianoKit={smoothPianoKit}
      presetOne={presetOne}
      presetTwo={presetTwo}
      presetThree={presetThree}
      presetFour={presetFour}
      />
    </div>
  </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'))
root.render(<App/>)
/* ReactDOM.render(<App/>,document.getElementById('root')); */
